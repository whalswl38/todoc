<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.todoc.web.dao.UntactDao">
	<resultMap type="com.todoc.web.dto.Untact" id="untactResultMap">
		<result column ="CLINIC_INSTINUM" property="clinicInstinum"/>
        <result column="CLINIC_REGNUM" property="clinicRegnum"/>
        <result column="CLINIC_PHONE" property="clinicPhone"/>
        <result column="CLINIC_NAME" property="clinicName"/>
        <result column="CLINIC_SUBJECT" property="clinicSubject"/>
        <result column="CLINIC_SYMPTOM" property="clinicSymptom"/>
        <result column="CLINIC_EMAIL" property="clinicEmail"/>
        <result column="CLINIC_PWD" property="clinicPwd"/>
        <result column="CLINIC_DAY" property="clinicDay"/>
        <result column="CLINIC_TIME" property="clinicTime"/>
        <result column="CLINIC_DAYOFF" property="clinicDayoff"/>
        <result column="CLINIC_ZIPCODE" property="clinicZipcode"/>
        <result column="CLINIC_ADDR" property="clinicAddr"/>
        <result column="CLINIC_NON_BENEFIT" property="clinicNonBenefit"/>
        <result column="CLINIC_CONTACT_FLAG" property="clinicContactFlag"/>
        <result column="CLINIC_DETAIL" property="clinicDetail"/>
        <result column="CLINIC_STATUS" property="clinicStatus"/>
        <result column="CLINIC_DOCTOR" property="clinicDoctor"/>
        <result column="CLINIC_CAREER" property="clinicCareer"/>
        <result column="CLINIC_BREAK" property="clinicBreak"/>
        <result column="CLINIC_NIGHT" property="clinicNight"/>
		<!-- 첨부파일 resultMap -->
        <result column="FILE_SEQ" property="fileSeq"/>
        <result column="FILE_ORG_NAME" property="fileOrgName"/>
        <result column="FILE_NAME" property="fileName"/>
        <result column="FILE_EXT" property="fileExt"/>
        <result column="FILE_SIZE" property="fileSize"/>
        <result column="FILE_REGDATE" property="fileRegDate"/>
	</resultMap>	
	
<!-- 	<select id="subjectList" parameterType="com.todoc.web.dto.Untact" resultMap="untactResultMap">
	    SELECT CLINIC_INSTINUM, CLINIC_DOCTOR, CLINIC_NAME, CLINIC_TIME, CLINIC_STATUS, CLINIC_NIGHT FROM TD_CLINIC
	    WHERE 1=1
	    <if test="clinicSubject != null and clinicSubject != ''">
	        AND CLINIC_SUBJECT LIKE '%' || #{clinicSubject} || '%'
	    </if>
	    <if test="clinicSymptom != null and clinicSymptom != ''">
	        AND CLINIC_SYMPTOM LIKE '%' || #{clinicSymptom} || '%'
	    </if>
	</select> -->
	<select id="subjectList" parameterType="com.todoc.web.dto.Untact" resultMap="untactResultMap">
		SELECT A.CLINIC_INSTINUM, A.CLINIC_DOCTOR, A.CLINIC_NAME, A.CLINIC_TIME, A.CLINIC_STATUS, A.CLINIC_NIGHT, B.FILE_ORG_NAME
		FROM TD_CLINIC A
		LEFT JOIN TD_CLINIC_FILE B ON A.CLINIC_INSTINUM = B.CLINIC_INSTINUM
		WHERE 1=1
		<if test="clinicSubject != null and clinicSubject != ''">     
		AND A.CLINIC_SUBJECT LIKE '%' || #{clinicSubject} || '%'   
		</if>
		<if test="clinicSymptom != null and clinicSymptom != ''">     
		AND A.CLINIC_SYMPTOM LIKE '%' || #{clinicSymptom} || '%'
		</if>
	</select>
  
  	<select id="selectClinicDetail" parameterType="com.todoc.web.dto.Untact" resultMap="untactResultMap">
        SELECT
            A.CLINIC_INSTINUM as CLINIC_INSTINUM,
            NVL(A.CLINIC_DOCTOR, '') CLINIC_DOCTOR,
            NVL(A.CLINIC_NAME, '') CLINIC_NAME,
            NVL(A.CLINIC_SUBJECT, '') CLINIC_SUBJECT,
            NVL(A.CLINIC_TIME, '') CLINIC_TIME,
            NVL(A.CLINIC_DAYOFF, '') CLINIC_DAYOFF,
            NVL(A.CLINIC_ZIPCODE, '') CLINIC_ZIPCODE,
            NVL(A.CLINIC_ADDR, '') CLINIC_ADDR,
            NVL(A.CLINIC_DETAIL, '') CLINIC_DETAIL,
            NVL(A.CLINIC_CAREER, '') CLINIC_CAREER,
            NVL(A.CLINIC_BREAK, '') CLINIC_BREAK,
            NVL(B.FILE_ORG_NAME, '') AS FILE_ORG_NAME
        FROM
            TD_CLINIC A, TD_CLINIC_FILE B
		WHERE A.CLINIC_INSTINUM = B.CLINIC_INSTINUM
        AND A.CLINIC_INSTINUM = #{clinicInstinum}
	</select>

</mapper>